# only one connection and one cursor will be created

import sqlite3

class DatabaseConnection(object):
    def __new__(cls):   # "real" constructor
        if not hasattr(cls, '_instance'):
            cls._instance = super().__new__(cls)
        return cls._instance

    def __init__(self):
        print("Hello from __init__()")
        # IMPORTANT! One-time setup
        if not hasattr(self, '_db_connection'):
            self._db_connection = sqlite3.connect(':memory:')
            self._db_cursor = self._db_connection.cursor()

    def __del__(self):
        print("destroying connection")
        if hasattr(self, '_db_connection'):
            print("closing connection")
            self._db_connection.close()

    @property
    def cursor(self):
        return self._db_cursor

